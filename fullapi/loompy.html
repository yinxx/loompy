

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>loompy package &mdash; loompy 2.0.10 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Loom file format specs" href="../format/index.html" />
    <link rel="prev" title="Complete API Reference" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> loompy
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to loompy!</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html#getting-started">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../semantics/index.html">Understanding the semantics of loom files</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../apiwalkthrough/index.html">API Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions/index.html">Conventions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Complete API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">loompy package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-loompy.loompy">loompy.loompy module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-loompy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../format/index.html">Loom file format specs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">loompy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Complete API Reference</a> &raquo;</li>
        
      <li>loompy package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/linnarsson-lab/loompy/blob/master/doc/fullapi/loompy.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="loompy-package">
<h1>loompy package<a class="headerlink" href="#loompy-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-loompy.loompy">
<span id="loompy-loompy-module"></span><h2>loompy.loompy module<a class="headerlink" href="#module-loompy.loompy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="loompy.loompy.LoomConnection">
<em class="property">class </em><code class="descclassname">loompy.loompy.</code><code class="descname">LoomConnection</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'r+'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.mode">
<code class="descname">mode</code><a class="headerlink" href="#loompy.loompy.LoomConnection.mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.last_modified">
<code class="descname">last_modified</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.last_modified"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an ISO8601 timestamp when the file was last modified</p>
<p>Note: if the file has no timestamp, and mode is ‘r+’, a new timestamp is created and returned.
Otherwise, the current time in UTC is returned</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.get_changes_since">
<code class="descname">get_changes_since</code><span class="sig-paren">(</span><em>timestamp: str</em><span class="sig-paren">)</span> &#x2192; Dict[str, List]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.get_changes_since"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.get_changes_since" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.sparse">
<code class="descname">sparse</code><span class="sig-paren">(</span><em>rows: numpy.ndarray = None</em>, <em>cols: numpy.ndarray = None</em>, <em>layer: str = None</em><span class="sig-paren">)</span> &#x2192; scipy.sparse.coo.coo_matrix<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the main matrix as a scipy.sparse.coo_matrix, without loading dense matrix in RAM</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rows</strong> – Rows to include, or None to include all</li>
<li><strong>cols</strong> – Columns to include, or None to include all</li>
<li><strong>layer</strong> – Layer to return, or None to return the default layer</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">scipy.sparse.coo_matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>suppress_warning: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection. After this, the connection object becomes invalid. Warns user if called after closing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>suppress_warning</strong> – Suppresses warning message if True (defaults to false)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.closed">
<code class="descname">closed</code><a class="headerlink" href="#loompy.loompy.LoomConnection.closed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.set_layer">
<code class="descname">set_layer</code><span class="sig-paren">(</span><em>name: str</em>, <em>matrix: numpy.ndarray</em>, <em>chunks: Tuple[int</em>, <em>int] = (64</em>, <em>64)</em>, <em>chunk_cache: int = 512</em>, <em>dtype: str = 'float32'</em>, <em>compression_opts: int = 2</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.set_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.set_layer" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>ds.layer.Name = matrix</cite> or <cite>ds.layer[`Name</cite>] = matrix` instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.add_columns">
<code class="descname">add_columns</code><span class="sig-paren">(</span><em>layers: Union[numpy.ndarray, typing.Dict[str, numpy.ndarray], loompy.layer_manager.LayerManager], col_attrs: Dict[str, numpy.ndarray], *, fill_values: Dict[str, numpy.ndarray] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.add_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.add_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Add columns of data and attribute values to the dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>layers</strong> (<em>dict</em><em> or </em><em>numpy.ndarray</em><em> or </em><em>LayerManager</em>) – Either:
1) A N-by-M matrix of float32s (N rows, M columns) in this case columns are added at the default layer
2) A dict {layer_name : matrix} specified so that the matrix (N, M) will be added to layer <cite>layer_name</cite>
3) A LayerManager object (such as what is returned by view.layers)</li>
<li><strong>col_attrs</strong> (<em>dict</em>) – Column attributes, where keys are attribute names and values are numpy arrays (float or string) of length M</li>
<li><strong>fill_values</strong> – dictionary of values to use if a column attribute is missing, or “auto” to fill with zeros or empty strings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>This will modify the underlying HDF5 file, which will interfere with any concurrent readers.</li>
<li>Column attributes in the file that are NOT provided, will be deleted (unless fill value provided).</li>
<li>Array with Nan should not be provided</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.add_loom">
<code class="descname">add_loom</code><span class="sig-paren">(</span><em>other_file: str</em>, <em>key: str = None</em>, <em>fill_values: Dict[str</em>, <em>numpy.ndarray] = None</em>, <em>batch_size: int = 1000</em>, <em>convert_attrs: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.add_loom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.add_loom" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the content of another loom file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>other_file</strong> (<em>str</em>) – filename of the loom file to append</li>
<li><strong>key</strong> – Primary key to use to align rows in the other file with this file</li>
<li><strong>fill_values</strong> (<em>dict</em>) – default values to use for missing attributes (or None to drop missing attrs, or ‘auto’ to fill with sensible defaults)</li>
<li><strong>batch_size</strong> (<em>int</em>) – the batch size used by batchscan (limits the number of rows/columns read in memory)</li>
<li><strong>convert_attrs</strong> (<em>bool</em>) – convert file attributes that differ between files into column attributes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing, but adds the loom file. Note that the other loom file must have exactly the same
number of rows, and must have exactly the same column attributes.
The all the contents including layers but ignores layers in <cite>other_file</cite> that are not already persent in self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.delete_attr">
<code class="descname">delete_attr</code><span class="sig-paren">(</span><em>name: str</em>, <em>axis: int = 0</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.delete_attr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.delete_attr" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>del ds.ra.key</cite> or <cite>del ds.ca.key</cite> instead, where <cite>key</cite> is replaced with the attribute name</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.set_attr">
<code class="descname">set_attr</code><span class="sig-paren">(</span><em>name: str</em>, <em>values: numpy.ndarray</em>, <em>axis: int = 0</em>, <em>dtype: str = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.set_attr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.set_attr" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>ds.ra.key = values</cite> or <cite>ds.ca.key = values</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.list_edges">
<code class="descname">list_edges</code><span class="sig-paren">(</span><em>*</em>, <em>axis: int</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.list_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.list_edges" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>ds.row_graphs.keys()</cite> or <cite>ds.col_graphs.keys()</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.get_edges">
<code class="descname">get_edges</code><span class="sig-paren">(</span><em>name: str</em>, <em>*</em>, <em>axis: int</em><span class="sig-paren">)</span> &#x2192; Tuple[[numpy.ndarray, numpy.ndarray], numpy.ndarray]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.get_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.get_edges" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>ds.row_graphs[name]</cite> or <cite>ds.col_graphs[name]</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.set_edges">
<code class="descname">set_edges</code><span class="sig-paren">(</span><em>name: str</em>, <em>a: numpy.ndarray</em>, <em>b: numpy.ndarray</em>, <em>w: numpy.ndarray</em>, <em>*</em>, <em>axis: int</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.set_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.set_edges" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>ds.row_graphs[name] = g</cite> or <cite>ds.col_graphs[name] = g</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.scan">
<code class="descname">scan</code><span class="sig-paren">(</span><em>*</em>, <em>items: numpy.ndarray = None</em>, <em>axis: int = None</em>, <em>layers: Iterable = None</em>, <em>key: str = None</em>, <em>batch_size: int = 512</em><span class="sig-paren">)</span> &#x2192; Iterable[Tuple[[int, numpy.ndarray], loompy.loom_view.LoomView]]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan across one axis and return batches of rows (columns) as LoomView objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (<em>np.ndarray</em>) – the indexes [0, 2, 13, … ,973] of the rows/cols to include along the axis
OR: boolean mask array giving the rows/cols to include</li>
<li><strong>axis</strong> (<em>int</em>) – 0:rows or 1:cols</li>
<li><strong>batch_size</strong> (<em>int</em>) – the chuncks returned at every element of the iterator</li>
<li><strong>layers</strong> (<em>iterable</em>) – if specified it will batch scan only across some of the layers of the loom file
if layers == None, all layers will be scanned
if layers == [“”] or “”, only the default layer will be scanned</li>
<li><strong>key</strong> – Name of primary key attribute. If specified, return the values sorted by the key</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>Iterable that yields triplets</em></li>
<li><em>(ix, indexes, view)</em></li>
<li><strong>ix</strong> (<em>int</em>) – first position / how many rows/cols have been yielded alredy</li>
<li><strong>indexes</strong> (<em>np.ndarray[int]</em>) – the indexes with the same numbering of the input args cells / genes (i.e. np.arange(len(ds.shape[axis])))
this is ix + selection</li>
<li><strong>view</strong> (<em>LoomView</em>) – a view corresponding to the current chunk</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.batch_scan">
<code class="descname">batch_scan</code><span class="sig-paren">(</span><em>cells: numpy.ndarray = None</em>, <em>genes: numpy.ndarray = None</em>, <em>axis: int = 0</em>, <em>batch_size: int = 1000</em>, <em>layer: str = None</em><span class="sig-paren">)</span> &#x2192; Iterable[Tuple[[int, numpy.ndarray], numpy.ndarray]]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.batch_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.batch_scan" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>scan</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.batch_scan_layers">
<code class="descname">batch_scan_layers</code><span class="sig-paren">(</span><em>cells: numpy.ndarray = None</em>, <em>genes: numpy.ndarray = None</em>, <em>axis: int = 0</em>, <em>batch_size: int = 1000</em>, <em>layers: Iterable = None</em><span class="sig-paren">)</span> &#x2192; Iterable[Tuple[[int, numpy.ndarray], Dict]]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.batch_scan_layers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.batch_scan_layers" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>DEPRECATED</strong> - Use <cite>scan</cite> instead</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.map">
<code class="descname">map</code><span class="sig-paren">(</span><em>f_list: List[Callable[numpy.ndarray, int]], *, axis: int = 0, chunksize: int = 1000, selection: numpy.ndarray = None</em><span class="sig-paren">)</span> &#x2192; List[numpy.ndarray]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function along an axis without loading the entire dataset in memory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>list of func</em>) – Function(s) that takes a numpy ndarray as argument</li>
<li><strong>axis</strong> (<em>int</em>) – Axis along which to apply the function (0 = rows, 1 = columns)</li>
<li><strong>chunksize</strong> (<em>int</em>) – Number of rows (columns) to load per chunk</li>
<li><strong>selection</strong> (<em>array of bool</em>) – Columns (rows) to include</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy.ndarray result of function application
The result is a list of numpy arrays, one per supplied function in f_list.
This is more efficient than repeatedly calling map() one function at a time.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.permute">
<code class="descname">permute</code><span class="sig-paren">(</span><em>ordering: numpy.ndarray</em>, <em>axis: int</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.permute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.permute" title="Permalink to this definition">¶</a></dt>
<dd><p>Permute the dataset along the indicated axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ordering</strong> (<em>list of int</em>) – The desired order along the axis</li>
<li><strong>axis</strong> (<em>int</em>) – The axis along which to permute</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.export">
<code class="descname">export</code><span class="sig-paren">(</span><em>out_file: str</em>, <em>layer: str = None</em>, <em>format: str = 'tab'</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.export" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the specified layer and row/col attributes as tab-delimited file</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="loompy.loompy.create_append">
<code class="descclassname">loompy.loompy.</code><code class="descname">create_append</code><span class="sig-paren">(</span><em>filename: str, layers: Union[numpy.ndarray, typing.Dict[str, numpy.ndarray], loompy.layer_manager.LayerManager], row_attrs: Dict[str, numpy.ndarray], col_attrs: Dict[str, numpy.ndarray], *, file_attrs: Dict[str, str] = None, fill_values: Dict[str, numpy.ndarray] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#create_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.create_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append columns to a loom file, or create a new loom file if it doesn’t exist</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – The filename (typically using a <cite>.loom</cite> file extension)</li>
<li><strong>layers</strong> (<em>np.ndarray</em><em> or </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>np.ndarray</em><em>] or </em><em>LayerManager</em>) – Two-dimensional (N-by-M) numpy ndarray of float values
Or dictionary of named layers, each an N-by-M ndarray
or LayerManager, each layer an N-by-M ndarray</li>
<li><strong>row_attrs</strong> (<em>dict</em>) – Row attributes, where keys are attribute names and values
are numpy arrays (float or string) of length N</li>
<li><strong>col_attrs</strong> (<em>dict</em>) – Column attributes, where keys are attribute names and
values are numpy arrays (float or string) of length M</li>
<li><strong>file_attrs</strong> (<em>dict</em>) – Global attributes, where keys are attribute names and
values are strings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="loompy.loompy.create">
<code class="descclassname">loompy.loompy.</code><code class="descname">create</code><span class="sig-paren">(</span><em>filename: str, layers: Union[numpy.ndarray, typing.Dict[str, numpy.ndarray], loompy.layer_manager.LayerManager], row_attrs: Dict[str, numpy.ndarray], col_attrs: Dict[str, numpy.ndarray], *, file_attrs: Dict[str, str] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new .loom file from the given data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – The filename (typically using a <cite>.loom</cite> file extension)</li>
<li><strong>layers</strong> (<em>np.ndarray</em><em> or </em><em>scipy.sparse</em><em> or </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>np.ndarray</em><em>] or </em><em>LayerManager</em>) – Two-dimensional (N-by-M) numpy ndarray of float values
Or sparse matrix
Or dictionary of named layers, each an N-by-M ndarray
or LayerManager, each layer an N-by-M ndarray</li>
<li><strong>row_attrs</strong> (<em>dict</em>) – Row attributes, where keys are attribute names and values
are numpy arrays (float or string) of length N</li>
<li><strong>col_attrs</strong> (<em>dict</em>) – Column attributes, where keys are attribute names and
values are numpy arrays (float or string) of length M</li>
<li><strong>file_attrs</strong> (<em>dict</em>) – Global attributes, where keys are attribute names and
values are strings</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Remarks:</dt>
<dd>If the file exists, it will be overwritten. See create_append for a function that will append to existing files.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loompy.loompy.create_from_cellranger">
<code class="descclassname">loompy.loompy.</code><code class="descname">create_from_cellranger</code><span class="sig-paren">(</span><em>indir: str</em>, <em>outdir: str = None</em>, <em>genome: str = None</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/loompy/loompy.html#create_from_cellranger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.create_from_cellranger" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a .loom file from 10X Genomics cellranger output</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>indir</strong> (<em>str</em>) – path to the cellranger output folder (the one that contains ‘outs’)</li>
<li><strong>outdir</strong> (<em>str</em>) – output folder wher the new loom file should be saved (default to indir)</li>
<li><strong>genome</strong> (<em>str</em>) – genome build to load (e.g. ‘mm10’; if None, determine species from outs folder)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Path to the created loom file.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">path (str)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="loompy.loompy.combine">
<code class="descclassname">loompy.loompy.</code><code class="descname">combine</code><span class="sig-paren">(</span><em>files: List[str], output_file: str, key: str = None, file_attrs: Dict[str, str] = None, batch_size: int = 1000, convert_attrs: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#combine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine two or more loom files and save as a new loom file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>files</strong> (<em>list of str</em>) – the list of input files (full paths)</li>
<li><strong>output_file</strong> (<em>str</em>) – full path of the output loom file</li>
<li><strong>key</strong> (<em>string</em>) – Row attribute to use to verify row ordering</li>
<li><strong>file_attrs</strong> (<em>dict</em>) – file attributes (title, description, url, etc.)</li>
<li><strong>batch_size</strong> (<em>int</em>) – limits the batch or cols/rows read in memory (default: 1000)</li>
<li><strong>convert_attrs</strong> (<em>bool</em>) – convert file attributes that differ between files into column attributes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Nothing, but creates a new loom file combining the input files.</p>
</td>
</tr>
</tbody>
</table>
<p>The input files must (1) have exactly the same number of rows, (2) have
exactly the same sets of row and column attributes.</p>
</dd></dl>

<dl class="function">
<dt id="loompy.loompy.connect">
<code class="descclassname">loompy.loompy.</code><code class="descname">connect</code><span class="sig-paren">(</span><em>filename: str</em>, <em>mode: str = 'r+'</em><span class="sig-paren">)</span> &#x2192; loompy.loompy.LoomConnection<a class="reference internal" href="../_modules/loompy/loompy.html#connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a connection to a .loom file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – Name of the .loom file to open</li>
<li><strong>mode</strong> (<em>str</em>) – read/write mode, accepts ‘r+’ (read/write) or
‘r’ (read-only), defaults to ‘r+’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A LoomConnection instance.</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Remarks:</dt>
<dd><p class="first">This function should typically be called as a context manager:</p>
<blockquote>
<div><dl class="docutils">
<dt>with loompy.connect(filename) as ds:</dt>
<dd>…do something…</dd>
</dl>
</div></blockquote>
<p class="last">This ensures that the file will be closed automatically when the context block ends</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-loompy">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-loompy" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../format/index.html" class="btn btn-neutral float-right" title="Loom file format specs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Complete API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, LinnarssonLab.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.0.10',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>